<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GoBuy Language Test</title>
    <style>
      body {
        font-family: Arial;
        margin: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ccc;
      }
      .currency-display {
        font-size: 24px;
        font-weight: bold;
      }
      select {
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <h1>GoBuy Language & Currency Test</h1>

    <div class="test-section">
      <h2>Language Selection</h2>
      <label
        >Select Language:
        <select id="language-select">
          <option value="nl">ðŸ‡³ðŸ‡± Nederlands</option>
          <option value="de">ðŸ‡©ðŸ‡ª Deutsch</option>
          <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
          <option value="en">ðŸ‡¬ðŸ‡§ English</option>
        </select>
      </label>
    </div>

    <div class="test-section">
      <h2>Currency Selection</h2>
      <label
        >Select Currency:
        <select id="currency-select">
          <option value="EUR">Euro (â‚¬)</option>
          <option value="USD">Dollar ($)</option>
          <option value="GBP">Pound (Â£)</option>
        </select>
      </label>
    </div>

    <div class="test-section">
      <h2>Price Conversion Test</h2>
      <p>Test Price: â‚¬100 (with 21% VAT = â‚¬121)</p>
      <p class="currency-display" id="price-display">â‚¬121.00</p>
    </div>

    <div class="test-section">
      <h2>Translation Test</h2>
      <p>Dutch Text: <span id="nl-text">Sorteren</span></p>
      <p>German Text: <span id="de-text">Sorteren</span></p>
      <p>French Text: <span id="fr-text">Sorteren</span></p>
      <p>English Text: <span id="en-text">Sorteren</span></p>
    </div>

    <script>
      // Load language.js functions
      let currentLanguage = localStorage.getItem("language") || "nl";
      let currentCurrency = localStorage.getItem("currency") || "EUR";

      const exchangeRates = {
        EUR: 1.0,
        USD: 1.1,
        GBP: 0.86,
      };

      const currencySymbols = {
        EUR: "â‚¬",
        USD: "$",
        GBP: "Â£",
      };

      const translations = {
        nl: {
          Sorteren: "Sorteren",
        },
        de: {
          Sorteren: "Sortieren",
        },
        fr: {
          Sorteren: "Trier",
        },
        en: {
          Sorteren: "Sort",
        },
      };

      function convertPrice(priceInEur) {
        const rate = exchangeRates[currentCurrency] || 1;
        return (priceInEur * rate).toFixed(2);
      }

      function formatPrice(priceInEur) {
        const converted = convertPrice(priceInEur);
        const symbol = currencySymbols[currentCurrency] || "â‚¬";
        return `${symbol}${converted}`;
      }

      function translate(text) {
        if (currentLanguage === "nl") return text;
        return translations[currentLanguage]?.[text] || text;
      }

      // Test functions
      document.getElementById("language-select").value = currentLanguage;
      document.getElementById("currency-select").value = currentCurrency;

      document
        .getElementById("language-select")
        .addEventListener("change", (e) => {
          currentLanguage = e.target.value;
          localStorage.setItem("language", currentLanguage);
          updateDisplay();
        });

      document
        .getElementById("currency-select")
        .addEventListener("change", (e) => {
          currentCurrency = e.target.value;
          localStorage.setItem("currency", currentCurrency);
          updateDisplay();
        });

      function updateDisplay() {
        // Update price
        document.getElementById("price-display").textContent = formatPrice(121);

        // Update translations
        document.getElementById("nl-text").textContent = translate("Sorteren");
        document.getElementById("de-text").textContent = translate("Sorteren");
        document.getElementById("fr-text").textContent = translate("Sorteren");
        document.getElementById("en-text").textContent = translate("Sorteren");
      }

      updateDisplay();
    </script>
  </body>
</html>
